; Loader
LOADER_BASE_ADDR equ 0x900
LOADER_START_SECTOR equ 2
LOADER_SECTORS_CNT equ 4
LOADER_STACK_TOP equ LOADER_BASE_ADDR

; GDT
DESC_G_4K   equ (1 << 23)
DESC_D_32   equ (1 << 22)
DESC_L      equ (0 << 21)
DESC_AVL    equ (0 << 20)
DESC_LIMIT_CODE2  equ (0xF << 16)
DESC_LIMIT_DATA2  equ DESC_LIMIT_CODE2
DESC_LIMIT_VIDEO2 equ (0x0 << 16)
DESC_P      equ (1 << 15)
DESC_DPL_0  equ (0b00 << 13)
DESC_DPL_1  equ (0b01 << 13)
DESC_DPL_2  equ (0b10 << 13)
DESC_DPL_3  equ (0b11 << 13)
DESC_S_CODE equ (1 << 12)
DESC_S_DATA equ DESC_S_CODE
DESC_S_SYS  equ (0 << 12)
DESC_TYPE_CODE equ (0x8 << 8)
DESC_TYPE_DATA equ (0x2 << 8)

DESC_CODE_H4B  equ (0x00 << 24) | DESC_G_4K | DESC_D_32 | DESC_L | DESC_AVL | DESC_LIMIT_CODE2 | DESC_P | DESC_DPL_0 | DESC_S_CODE | DESC_TYPE_CODE | 0x00
DESC_CODE_L4B  equ 0x0000FFFF
DESC_DATA_H4B  equ (0x00 << 24) | DESC_G_4K | DESC_D_32 | DESC_L | DESC_AVL | DESC_LIMIT_DATA2 | DESC_P | DESC_DPL_0 | DESC_S_DATA | DESC_TYPE_DATA | 0x00

DESC_DATA_L4B  equ DESC_CODE_L4B
DESC_VIDEO_H4B equ (0x00 << 24) | DESC_G_4K | DESC_D_32 | DESC_L | DESC_AVL | DESC_LIMIT_VIDEO2 | DESC_P | DESC_DPL_0 | DESC_S_DATA | DESC_TYPE_DATA | 0x0B
DESC_VIDEO_L4B equ 0x80000007

; Selector
RPL_0 equ 0b00
RPL_1 equ 0b01
RPL_2 equ 0b10
RPL_3 equ 0b11
TI_GDT equ 0b000
TI_LDT equ 0b100

SELECTOR_CODE  equ (0x001 << 3) | TI_GDT | RPL_0
SELECTOR_DATA  equ (0x002 << 3) | TI_GDT | RPL_0
SELECTOR_VIDEO equ (0x003 << 3) | TI_GDT | RPL_0

; Page Table
PAGE_DIR_ADDR equ 0x100000
PAGE_TBL_ADDR equ 0x101000
PG_P equ (0x1 << 0)
PG_RW_R equ (0x0 << 1)
PG_RW_W equ (0x1 << 1)
PG_US_U equ (0x0 << 2)
PG_US_S equ (0x1 << 2)
